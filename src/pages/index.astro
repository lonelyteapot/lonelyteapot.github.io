---
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
// @ts-ignore;
import projects from "../../data/projects.yaml";
// @ts-ignore;
import ProjectIconLink from "../components/index_page/ProjectIconLink.astro";
import Button from "../components/Button.astro";
import Skill from "../components/index_page/Skill.astro";
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <main>
    <section id="about">
      <h1 class="title">Dmitry Semenov</h1>
      <p class="tagline">Software Developer</p>
      <p class="nickname">@lonelyteapot</p>
    </section>
    <section id="skills">
      <h2>My Tech Stack</h2>
      <ul>
        <li class="skill_category">
          <h3>Backend Development</h3>
          <ul class="skills">
            <Skill icon="starlite">Starlite</Skill>
            <Skill icon="simple-icons:fastapi" iconColor="#05998b">FastAPI</Skill>
            <Skill icon="simple-icons:flask" iconColor="white">Flask</Skill>
            <Skill icon="logos:firebase">Firebase</Skill>
            <Skill icon="logos:google-cloud">Google Cloud</Skill>
          </ul>
        </li>
        <li class="skill_category">
          <h3>Frontend Development</h3>
          <ul class="skills">
            <Skill icon="logos:flutter">Flutter</Skill>
            <Skill icon="vscode-icons:file-type-astro">Astro</Skill>
            <Skill icon="logos:vue">Vue</Skill>
            <Skill icon="logos:qt">Qt</Skill>
            <Skill icon="logos:android-icon">Android</Skill>
          </ul>
        </li>
        <li class="skill_category">
          <h3>Programming Languages</h3>
          <ul class="skills">
            <Skill icon="logos:dart">Dart</Skill>
            <Skill icon="logos:python">Python</Skill>
            <Skill icon="logos:javascript">JavaScript</Skill>
            <Skill icon="vscode-icons:file-type-cpp3">C++</Skill>
            <Skill icon="logos:java">Java, Kotlin</Skill>
          </ul>
        </li>
      </ul>
    </section>
    <section id="software">
      <h2>My Software</h2>
      <ul>
        {
          projects.map((project) => (
            <li class:list={["project", { narrow: !project.images }]}>
              <Card>
                <div class="content">
                  <header>
                    <h3>{project.name}</h3>
                    <div class="stage yellow" set:html={project.stage} />
                  </header>
                  {project.description && <p class="description" set:html={project.description} />}
                  <ul class="keypoints">
                    {project.keypoints.map((keypoint) => (
                      <li set:html={keypoint} />
                    ))}
                  </ul>
                  {project.links && (
                    <div class="links">
                      {project.links.map((item) => (
                        <ProjectIconLink text={item.text} url={item.url} icon={item.icon} />
                      ))}
                    </div>
                  )}
                </div>
                {project.images && (
                  <div class="images">
                    {project.images.map((image) => (
                      <div class="wrapper">
                        <img src={"/images/" + image} alt="screenshot" />
                      </div>
                    ))}
                  </div>
                )}
              </Card>
            </li>
          ))
        }
      </ul>
    </section>
    <section id="contact-me">
      <h2>Contact me</h2>
      <form action="https://formspree.io/f/myyojnjw" method="POST">
        <label class="input message">
          <textarea name="message" placeholder=" " required></textarea>
          <span class="label">Message</span>
        </label>
        <label class="input email">
          <input type="email" name="email" placeholder=" " required />
          <span class="label">email@to-reply.to</span>
        </label>
        <Button type="submit">Send</Button>
      </form>
    </section>
  </main>
</Layout>

<style is:global lang="scss">
  main {
    gap: 6rem;
  }

  #about {
    height: 50vh;
    text-align: center;
    display: grid;
    grid-template:
      "title title" min-content
      "tagline nickname" min-content
      / auto min-content;
    align-content: center;
    justify-content: center;
  }

  #about .title {
    grid-area: title;
    margin: 0 0 0 -8px;
    font-size: min(11.5vw, 5rem);
    font-family: var(--secondary-font);
    color: var(--primary-color);
  }

  #about .tagline {
    grid-area: tagline;
    text-align: left;
    margin: 0;
    font-size: 1.25rem;
  }

  #about .nickname {
    grid-area: nickname;
    margin: 0 0 0 0;
    font-size: 1.25rem;
  }

  #skills > ul {
    list-style: none;
    margin: 1.5rem;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    gap: 3rem;
  }

  #skills li.skill_category h3 {
    font-size: 1.25rem;
  }

  #skills ul.skills {
    list-style: none;
    margin: 0 2rem;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  #software {
    > ul {
      margin: 0;
      padding: 0;
      color: var(--color-on-canvas);
    }

    p {
      margin: 0;
    }

    .project {
      display: grid;
      flex: 1 1 100%;

      &.narrow {
        flex-basis: 400px;
      }
    }

    .card {
      flex-direction: column;
      gap: 1rem;

      @media (min-width: 750px) {
        flex-direction: row;
      }
    }

    .content {
      display: flex;
      flex-direction: column;
      justify-content: start;
      flex: 1;
      gap: 0.5rem;
      margin-top: -0.25rem;

      header {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        padding-bottom: 0.25rem;
        border-bottom: 1px solid rgb(0 0 0 / 12%);
      }

      h3 {
        font-size: 1.75rem;
      }

      .stage {
        margin-bottom: 0.125rem;
        font-size: 15px;
        opacity: 0.6;
        font-variant: small-caps;
        text-transform: lowercase;
        font-family: var(--secondary-font);
      }

      .keypoints {
        list-style-type: disc;
        padding-left: 1em;
      }

      .links {
        display: flex;
        justify-content: space-evenly;
        gap: 0.25rem;
        margin: -0.5rem;
        margin-top: auto;
        // Fix mouse hover problems caused by anchoring fix
        z-index: 1;
      }
    }

    .images {
      display: flex;
      justify-content: space-evenly;
      gap: 0.75rem;
      flex: 1;

      .wrapper {
        border-radius: 6px;
        background-color: transparentize(black, 0.8);
        box-shadow: var(--shadow);
        overflow: hidden;
      }

      img {
        max-width: 100%;
        max-height: 25rem;
        height: 100%;
      }
    }
  }

  #contact-me form {
    flex: 1 1 480px;
    display: grid;
    grid-template-columns: 1fr auto;
    grid-template-rows: minmax(200px, auto) auto;
    grid-template-areas: "message message" "email submit";
    gap: 0.75rem;

    .input {
      background-color: var(--color-canvas);
      box-shadow: var(--shadow-md);
      border-radius: 8px;
    }

    .message {
      grid-area: message;
    }

    .email {
      grid-area: email;
    }

    .submit {
      grid-area: submit;
      font-size: 18px;
    }
  }
</style>
